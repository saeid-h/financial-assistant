# [5-1] Add Chart.js library and create reports page structure

[Back to task list](./tasks.md)

## Description

Set up the Chart.js library and create the basic structure for the Reports page. This includes adding the library to the project, creating the reports template with placeholder sections for charts, and establishing the routing.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-10-19 23:25:00 | Created | N/A | Proposed | Task file created | Saeed |

## Requirements

### Functional Requirements
1. Add Chart.js 4.x library to the project
2. Create `/reports` route in Flask
3. Create `reports.html` template with sections for:
   - Page header with title
   - Filter controls (date range, account)
   - 4 chart containers with appropriate IDs
   - Export button
4. Add "Reports" link to main navigation
5. Include basic styling for chart containers
6. Add loading states for charts

### Non-Functional Requirements
- Chart containers should be responsive
- Template should extend `base.html` for consistent navigation
- Charts should have minimum height to prevent layout shift
- Page should work without JavaScript (show message)

## Implementation Plan

### Step 1: Add Chart.js to project
- Add Chart.js CDN link to reports template
- Alternatively, download and serve locally from `static/js/`
- Choose CDN for simplicity and caching

### Step 2: Create Flask route
- Add route `/reports` in `src/routes/reports.py` (new file)
- Import and register blueprint in `src/app.py`
- Route renders `reports.html` template

### Step 3: Create reports template
- Create `src/templates/reports.html`
- Extend `base.html`
- Add page structure:
  ```html
  <div class="reports-page">
    <h1>Financial Reports</h1>
    
    <!-- Filters -->
    <div class="report-filters">
      <select id="date-range">...</select>
      <select id="account-filter">...</select>
      <button id="apply-filters">Apply</button>
      <button id="export-csv">Export CSV</button>
    </div>
    
    <!-- Charts Grid -->
    <div class="charts-grid">
      <div class="chart-card">
        <h3>Income vs Expenses</h3>
        <canvas id="income-expense-chart"></canvas>
      </div>
      
      <div class="chart-card">
        <h3>This Month's Spending</h3>
        <canvas id="category-pie-chart"></canvas>
      </div>
      
      <div class="chart-card full-width">
        <h3>Monthly Expenses by Category</h3>
        <canvas id="monthly-category-chart"></canvas>
      </div>
      
      <div class="chart-card full-width">
        <h3>Top Spending Categories</h3>
        <canvas id="top-categories-chart"></canvas>
      </div>
    </div>
  </div>
  ```

### Step 4: Add CSS styling
- Add styles to `src/static/css/style.css`:
  - Grid layout for charts (2 columns on desktop, 1 on mobile)
  - Card styling for chart containers
  - Filter bar styling
  - Responsive breakpoints

### Step 5: Update navigation
- Add "Reports" link to `src/templates/base.html` navigation
- Link should point to `/reports`

### Step 6: Add placeholder JavaScript
- Add `<script>` section with:
  - Chart initialization placeholders
  - Console logs to confirm page loads
  - Empty functions for filter and export (to be implemented in later tasks)

## Test Plan

### Unit Tests
- Not applicable for this task (frontend setup)

### Integration Tests
Create `tests/integration/test_reports.py`:
- Test `/reports` route returns 200 OK
- Test page includes Chart.js library
- Test page contains all 4 canvas elements with correct IDs
- Test navigation includes Reports link

### Manual Testing
1. Navigate to http://localhost:5001/reports
2. Verify page loads without errors
3. Verify Chart.js is loaded (check browser console)
4. Verify all chart containers are visible
5. Verify filter dropdowns and export button are present
6. Verify navigation includes "Reports" link
7. Test responsive layout (resize browser)

### Success Criteria
- `/reports` route accessible
- Page displays with proper layout
- All chart containers present and styled
- Filter controls visible and styled
- Export button visible
- Navigation updated with Reports link
- No console errors
- Page is responsive (works on mobile)

## Verification

### Definition of Done
- [x] Chart.js library added to project
- [x] `/reports` route created and working
- [x] `reports.html` template created with all sections
- [x] CSS styling applied for responsive layout
- [x] Navigation updated with Reports link
- [x] Integration tests passing
- [x] Manual testing completed successfully
- [x] No console errors on page load

### Testing Evidence
- Integration test: `test_reports_page_loads`
- Integration test: `test_reports_includes_chartjs`
- Integration test: `test_reports_has_all_charts`
- Manual test: Screenshot showing reports page with all elements

## Files Modified

### New Files
- `src/routes/reports.py` - Reports route blueprint
- `src/templates/reports.html` - Reports page template
- `tests/integration/test_reports.py` - Integration tests

### Modified Files
- `src/app.py` - Register reports blueprint
- `src/templates/base.html` - Add Reports link to navigation
- `src/static/css/style.css` - Add reports page styling

## Notes

- Using Chart.js CDN (https://cdn.jsdelivr.net/npm/chart.js@4) for simplicity
- Chart.js is MIT licensed and free to use
- Charts will be populated with data in subsequent tasks
- This task only creates the structure, no actual data or charts yet
- Consider adding Chart.js Date Adapter if we need time-scale axes

