# Task 2-5: Create Import Upload UI

[Back to task list](./tasks.md)

## Description

Build a web interface for uploading CSV files and importing transactions. This includes file upload, account selection, transaction preview, and confirmation workflow.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-10-19 19:55:00 | Created | N/A | Proposed | Task created | Saeed |
| 2025-10-19 19:55:00 | Approved | Proposed | Agreed | Task approved - user needs UI to import CSV | Saeed |
| 2025-10-19 19:55:00 | Started | Agreed | InProgress | Building import UI and workflow | Saeed |
| 2025-10-19 20:00:00 | Completed | InProgress | Review | Import UI complete with tests, all 111 tests passing | Saeed |
| 2025-10-19 20:17:00 | Approved | Review | Done | Import workflow fully functional with storage, preview, and routes | Saeed |

## Requirements

1. File upload form with account selection
2. Parse CSV on upload and show preview
3. Display validation errors if any
4. Show transaction preview with summary stats
5. Confirm button to save transactions
6. Success/error feedback
7. Link from navigation menu

## Implementation Plan

### 1. Create Import Page UI (`src/templates/import.html`)

**Features:**
- File upload input (CSV only)
- Account dropdown (from existing accounts)
- Upload button
- Transaction preview table
- Summary statistics (count, total credits, total debits)
- Confirm import button
- Error display

### 2. Create Import Route (`src/routes/import.py`)

**Endpoints:**
- GET `/import` - Show import form
- POST `/import/upload` - Handle file upload and preview
- POST `/import/confirm` - Save transactions to database

### 3. Transaction Model (`src/models/transaction.py`)

**CRUD operations:**
- Create transaction
- Bulk create transactions
- Get by account
- Get by date range

## Test Plan

**Manual Testing:**
- Upload various CSV formats
- View transaction preview
- Confirm import
- Check transactions saved to database
- Test validation errors display

## Verification

- [x] Import page created
- [x] File upload works
- [x] CSV parsed and previewed
- [x] Validation errors shown
- [x] Transactions saved on confirm
- [x] Navigation link works
- [x] User feedback clear
- [x] All tests passing (9 integration tests, 13 transaction model tests)

## Files Modified

**Created:**
- `src/templates/import.html`
- `src/routes/import.py`
- `src/models/transaction.py`

**Modified:**
- `src/app.py` (register import blueprint)
- `src/templates/base.html` (import link active state)

## Notes

- For now, skip duplicate detection (will add in Task 2-4)
- For now, skip file archiving (will add in Task 2-7)
- Focus on getting basic import working

