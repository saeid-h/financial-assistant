# Task 3-2: Create Account Details Page

[Back to task list](./tasks.md)

## Description

Build a dedicated account details page that shows statistics, recent transactions, and account-specific insights. Users can navigate to this page by clicking "View Transactions" on an account card.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-10-19 21:27:00 | Created | N/A | Proposed | Task created | Saeed |
| 2025-10-19 21:27:00 | Approved | Proposed | Agreed | Essential for PBI-3 completion | Saeed |
| 2025-10-19 21:27:00 | Started | Agreed | InProgress | Creating account details page | Saeed |
| 2025-10-19 21:35:00 | Completed | InProgress | Review | Account details page fully implemented | Saeed |
| 2025-10-19 21:36:00 | Approved | Review | Done | All tests passing, feature working | Saeed |

## Requirements

1. Dedicated route: `/accounts/<account_id>/details`
2. Display account information (name, type, institution)
3. Show account statistics:
   - Total transactions
   - Total credits (deposits/income)
   - Total debits (withdrawals/expenses)
   - Net cash flow
4. List transactions for this account only
5. Provide navigation back to accounts list
6. Link to edit account
7. Responsive design matching existing pages

## Implementation Plan

### 1. Add Route to accounts.py

```python
@accounts_bp.route('/<int:account_id>/details')
def account_details(account_id):
    # Get account info
    # Get account statistics
    # Render template
```

### 2. Create Template (account_details.html)

**Layout**:
- Header with account name and type
- Edit account button
- Statistics cards (4 cards)
- Recent transactions table
- "View All Transactions" link
- "Back to Accounts" link

### 3. Update Account Cards

Add "View Transactions" button to each card in accounts.html

## Test Plan

**Success Criteria**:
- Account details page loads
- Statistics calculated correctly
- Transactions filtered by account
- Navigation works
- Edit button opens modal
- Responsive on mobile

**Manual Tests**:
- View account with no transactions
- View account with transactions
- View account with 800+ transactions
- Click edit from details page
- Navigate back to accounts list

## Verification

- [x] Route created (`/accounts/<id>/details`)
- [x] Template created (`account_details.html`)
- [x] Statistics display correctly (4 stat cards)
- [x] Transactions filtered by account
- [x] Navigation working (Edit, Back buttons)
- [x] Responsive design
- [x] Manual tests passing
- [x] Currency filter added to Flask app
- [x] Account cards updated with "View Transactions" button

## Files Modified

**New**:
- `src/templates/account_details.html` - Full account details page with stats and transactions

**Modified**:
- `src/routes/accounts.py` - Added `account_details()` route with statistics calculation
- `src/templates/accounts.html` - Added "View Transactions" button, updated card layout
- `src/app.py` - Added `format_currency` Jinja filter
- `src/models/transaction.py` - Fixed to use Flask config DATABASE during tests


